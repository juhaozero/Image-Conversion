<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图片格式转换工具</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🖼️ 图片格式转换工具</h1>
            <p>支持PNG、JPG、WEBP等格式转换</p>
        </header>

        <main>
            <!-- 文件上传区域 -->
            <div class="upload-section">
                <div class="upload-area" id="uploadArea">
                    <div class="upload-content">
                        <div class="upload-icon">📁</div>
                        <h3>点击或拖拽图片到此处</h3>
                        <p>支持PNG、JPG、JPEG、GIF、WEBP格式</p>
                        <input type="file" id="fileInput" accept="image/*" multiple>
                        <button class="upload-btn" onclick="document.getElementById('fileInput').click()">
                            选择图片
                        </button>
                    </div>
                </div>
            </div>

            <!-- 转换设置 -->
            <div class="settings-section" id="settingsSection" style="display: none;">
                <h3>转换设置</h3>
                <div class="settings-grid">
                    <div class="setting-item">
                        <label for="outputFormat">输出格式:</label>
                        <select id="outputFormat">
                            <option value="jpg">JPG</option>
                            <option value="png">PNG</option>
                            <option value="webp">WEBP</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label for="quality">JPEG质量:</label>
                        <input type="range" id="quality" min="1" max="100" value="90">
                        <span id="qualityValue">90</span>
                    </div>
                    <div class="setting-item">
                        <label for="resizeWidth">宽度:</label>
                        <input type="number" id="resizeWidth" placeholder="保持原尺寸" min="1">
                    </div>
                    <div class="setting-item">
                        <label for="resizeHeight">高度:</label>
                        <input type="number" id="resizeHeight" placeholder="保持原尺寸" min="1">
                    </div>
                                         <div class="setting-item aspect-ratio-item">
                         <label for="keepAspect">保持宽高比:</label>
                         <input type="checkbox" id="keepAspect" checked>
                     </div>
                     <div class="setting-item quick-settings-item">
                         <label>快速设置:</label>
                         <div class="quick-sizes">
                             <button type="button" onclick="setQuickSize(1920, 1080)" class="quick-size-btn">1920×1080</button>
                             <button type="button" onclick="setQuickSize(1280, 720)" class="quick-size-btn">1280×720</button>
                             <button type="button" onclick="setQuickSize(800, 600)" class="quick-size-btn">800×600</button>
                             <button type="button" onclick="setQuickSize(640, 480)" class="quick-size-btn">640×480</button>
                             <button type="button" onclick="clearSize()" class="quick-size-btn clear">清除</button>
                         </div>
                     </div>
                 </div>
             </div>

            <!-- 图片预览和转换 -->
            <div class="preview-section" id="previewSection" style="display: none;">
                <h3>图片预览</h3>
                <div class="image-grid" id="imageGrid"></div>
                <div class="action-buttons">
                    <button class="convert-btn" onclick="convertAllImages()">转换所有图片</button>
                    <button class="clear-btn" onclick="clearAllImages()">清空所有图片</button>
                </div>
            </div>

            <!-- 转换结果 -->
            <div class="result-section" id="resultSection" style="display: none;">
                <h3>转换结果</h3>
                <div class="result-grid" id="resultGrid"></div>
                <div class="download-all">
                    <button class="download-all-btn" onclick="downloadAllImages()">
                        📦 下载所有图片 (ZIP)
                    </button>
                    <p class="download-hint">支持ZIP打包下载，包含所有转换结果</p>
                </div>
            </div>
        </main>

        <footer>
            <p>使用HTML5技术，无需服务器，完全在本地处理</p>
            <!-- <div style="margin-top: 10px;">
                <button onclick="testConversion()" style="background: #6c757d; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; margin-right: 10px;">
                    测试转换功能
                </button>
                <button onclick="testSingleConversion()" style="background: #17a2b8; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; margin-right: 10px;">
                    测试单张转换
                </button>
                <button onclick="debugImages()" style="background: #fd7e14; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; margin-right: 10px;">
                    调试图片状态
                </button>
                <button onclick="resetUploadArea()" style="background: #6f42c1; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">
                    重置上传区域
                </button>
            </div> -->
        </footer>
    </div>

    <!-- JSZip库用于ZIP文件创建 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
